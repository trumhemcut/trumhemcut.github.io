<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Azure on Phi Huá»³nh</title>
    <link>https://trumhemcut.github.io/categories/azure/</link>
    <description>Recent content in Azure on Phi Huá»³nh</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 23 Aug 2016 16:34:00 +0000</lastBuildDate>
    <atom:link href="https://trumhemcut.github.io/categories/azure/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Táº¡o Docker Swarm Cluster dÃ¹ng Azure Container Service</title>
      <link>https://trumhemcut.github.io/2016/08/23/tao-docker-swarm-dung-azure-container-service</link>
      <pubDate>Tue, 23 Aug 2016 16:34:00 +0000</pubDate>
      
      <guid>https://trumhemcut.github.io/2016/08/23/tao-docker-swarm-dung-azure-container-service</guid>
      <description>

&lt;h2 id=&#34;giá»›i-thiá»‡u&#34;&gt;Giá»›i thiá»‡u&lt;/h2&gt;

&lt;p&gt;Docker Ä‘Ã£ quÃ¡ quen thuá»™c vá»›i anh em lÃ m DevOps vÃ  ngÃ y cÃ ng trá»Ÿ nÃªn phá»• biáº¿n vá»›i cáº£ developers. Build ra cÃ¡c images, táº¡o ra cÃ¡c containers gáº§n nhÆ° lÃ  cÃ¡c cÃ´ng viá»‡c thÆ°á»ng ngÃ y cá»§a dÃ¢n IT. HÃ´m nay tÃ´i xin giá»›i thiá»‡u cÃ¡ch dÃ¹ng &lt;strong&gt;Azure Container Service&lt;/strong&gt; Ä‘á»ƒ táº¡o ra má»™t &lt;strong&gt;Swarm Cluster&lt;/strong&gt; chá»‰ vá»›i vÃ i bÆ°á»›c Ä‘Æ¡n giáº£n. CÃ³ Ä‘iá»u lÆ°u Ã½ á»Ÿ Ä‘Ã¢y lÃ  Docker Swarm chá»© khÃ´ng pháº£i Docker Swarm-Mode (chá»‰ cÃ³ tá»« Docker v1.12 nhÃ©).&lt;/p&gt;

&lt;h2 id=&#34;chuáº©n-bá»‹&#34;&gt;Chuáº©n bá»‹&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Báº¡n cáº§n cÃ³ account cá»§a Azure&lt;/li&gt;
&lt;li&gt;Báº¡n cáº§n cÃ i Ä‘áº·t Docker trÃªn mÃ¡y tÃ­nh cá»§a mÃ¬nh, cÃ³ thá»ƒ lÃ  &lt;strong&gt;Docker for Mac&lt;/strong&gt; hoáº·c &lt;strong&gt;Docker for Windows&lt;/strong&gt; tÃ¹y há»‡ Ä‘iá»u hÃ nh Ä‘ang sá»­ dá»¥ng.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;táº¡o-ssh-key&#34;&gt;Táº¡o ssh key&lt;/h2&gt;

&lt;p&gt;Azure Container Service yÃªu cáº§u cÃ³ ssh public key Ä‘á»ƒ táº¡o service. Do Ä‘Ã³, chÃºng ta cáº§n pháº£i táº¡o ra key nÃ y Ä‘á»ƒ nháº­p vÃ o lÃºc Ä‘Äƒng kÃ½ Azure Container Service. Key nÃ y sáº½ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ Ä‘Äƒng nháº­p mÃ  khÃ´ng cáº§n pháº£i gÃµ password.&lt;/p&gt;

&lt;p&gt;Äá»ƒ táº¡o key, chÃºng ta má»Ÿ terminal lÃªn, sau Ä‘Ã³ gÃµ lá»‡nh &lt;code&gt;ssh-keygen&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ssh-keygen          
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/phihuynh/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /Users/phihuynh/.ssh/id_rsa.
Your public key has been saved in /Users/phihuynh/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:ZR+bg7xg4SKjU8yiQTMGvDS+soVi19fFB1GeWbU+Tzc phihuynh@phis-mbp.harveynash.vn.local
The key&#39;s randomart image is:
+---[RSA 2048]----+
|o          .o. .o|
|.+         .. + .|
|o=o     . + o+ . |
|oooo   . = = =.  |
|..o B . S + *  Eo|
|+=.= + + o . . .=|
|=o+   .   .     .|
|.  .             |
|                 |
+----[SHA256]-----+
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Sau Ä‘Ã³, chÃºng ta dÃ¹ng lá»‡nh &lt;code&gt;cat ~/.ssh/id_rsa.pub&lt;/code&gt; Ä‘á»ƒ xem giÃ¡ trá»‹ cá»§a public key. ChÃºng ta lÆ°u láº¡i giÃ¡ trá»‹ nÃ y Ä‘á»ƒ nháº­p vÃ o trong bÆ°á»›c Ä‘Äƒng kÃ½ &lt;strong&gt;Azure Containre Service&lt;/strong&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cat ~/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC/KIrbbnrP2X60Qr65dGIU3c0qDZP4bQpuFA71xbKBp45Rr4HPdQ4GBEnBf1oryNKBDOlhQCor7mIDn4hlwCvCGkiIP4IZEMDeSnraHlDUuyWd+CR1K+pi8OwP4DlSajEsikZ+zPQ8wr/aD94bs4yjEANclXGxQSGZMXdCdoizI9Qw3PZmd/xYLvtUatW1FOD9Jxt8+QHkAIroImviWUy6Wr7YAk9RhaMuD+yTvI9QETtquQhUOZNP8KD8jCPE3IgJIW2uWW5AFMkCIm54NDyMx1sVGuMb3/Vnxq2wjo+9if0DwGHNOsBfiq/zrTeSJ/9DjyCy8qFI7YcRkia4IzKt phihuynh@phis-mbp.harveynash.vn.local

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;táº¡o-azure-container-service&#34;&gt;Táº¡o Azure Container Service&lt;/h2&gt;

&lt;p&gt;Sau khi Ä‘Ã£ táº¡o xong ssh public key, bÆ°á»›c tiáº¿p theo lÃ  Ä‘Äƒng kÃ½ má»™t Azure Container Service Ä‘á»ƒ táº¡o ra má»™t Swarm Cluster. Azure Container Service cÃ³ thá»ƒ táº¡o ra má»™t Swarm Cluster hay Mesos Master.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ÄÄƒng nháº­p vÃ o &lt;strong&gt;&lt;a href=&#34;https://portal.azure.com&#34;&gt;Azure Portal&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Tá»« portal, chá»n &lt;strong&gt;New&lt;/strong&gt;, gÃµ vÃ o &lt;strong&gt;Azure Container Service&lt;/strong&gt;, sau Ä‘Ã³ nháº¥n vÃ o nÃºt &lt;strong&gt;Create&lt;/strong&gt;
&lt;img src=&#34;https://trumhemcut.github.io/images/acs1.png&#34; alt=&#34;Create container service&#34; /&gt;&lt;/li&gt;
&lt;li&gt;Sau Ä‘Ã³, nháº­p vÃ o &lt;strong&gt;User name&lt;/strong&gt;, &lt;strong&gt;SSH public key&lt;/strong&gt; chÃ­nh lÃ  giÃ¡ trá»‹ cá»§a public key báº¡n táº¡o ra á»Ÿ trÃªn. TÃ´i dÃ¹ng &lt;strong&gt;Visual Studio Premium with MSDN&lt;/strong&gt; subscription, náº¿u báº¡n dÃ¹ng trial hoáº·c mua thÃ¬ cÃ³ thá»ƒ lÃ  subscription khÃ¡c. Äáº·t tÃªn cho service lÃ  &lt;strong&gt;test-swarm&lt;/strong&gt;, chá»n Location lÃ  Southeast Asia vÃ  sau Ä‘Ã³ nháº¥n nÃºt &lt;strong&gt;OK&lt;/strong&gt;.
&lt;img src=&#34;https://trumhemcut.github.io/images/acs2.png&#34; alt=&#34;Basic configuration&#34; /&gt;&lt;/li&gt;
&lt;li&gt;á» bÆ°á»›c &lt;strong&gt;2 Framework configuration&lt;/strong&gt;, chá»n &lt;strong&gt;Ochestrator configuration&lt;/strong&gt; lÃ  &lt;strong&gt;Swarm&lt;/strong&gt; sau Ä‘Ã³ nháº¥n OK. Do bÃ i nÃ y chÃºng ta táº­p trung táº¡o Docker Swarm Cluster, Azure cÅ©ng há»— trá»£ Mesos Cluster.&lt;/li&gt;
&lt;li&gt;á» bÆ°á»›c &lt;strong&gt;3 Azure Container Service settings&lt;/strong&gt;, nháº­p vÃ o &lt;strong&gt;Agent count&lt;/strong&gt; lÃ  3 (chÃºng ta muá»‘n cÃ³ 3 nodes, báº¡n cÃ³ thá»ƒ nháº­p sá»‘ khÃ¡c tÃ¹y Ã½). &lt;strong&gt;Master count&lt;/strong&gt; lÃ  1 lÃ  Ä‘á»§, &lt;strong&gt;DNS prefix&lt;/strong&gt; nháº­p vÃ o text tÃ¹y Ã½, vÃ­ dá»¥ &lt;strong&gt;swarm&lt;/strong&gt;.
&lt;img src=&#34;https://trumhemcut.github.io/images/acs3.png&#34; alt=&#34;3 Azure container service settings&#34; /&gt;&lt;/li&gt;
&lt;li&gt;BÆ°á»›c 4 validation passed, nháº¥n &lt;strong&gt;OK&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;BÆ°á»›c 5 Buy, nháº¥n &lt;strong&gt;Purchase&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ToÃ n bá»™ quÃ¡ trÃ¬nh deployment diá»…n ra máº¥t khoáº£ng 15-20 phÃºt, chÃºng ta kiÃªn nháº«n chá» Ä‘á»£i. Sau khi deploy thÃ nh cÃ´ng, chÃºng ta cÃ³ thá»ƒ xem cÃ¡c service trong resource group &lt;strong&gt;test-swarm&lt;/strong&gt;. ChÃºng ta tháº¥y cÃ³ ráº¥t nhiá»u service Ä‘Æ°á»£c táº¡o ra: 1 virtual machine, 1 virtual machine scaleset (bao gá»“m 3 instances tÆ°Æ¡ng á»©ng vá»›i 3 nodes chÃºng ta cáº¥u hÃ¬nh á»Ÿ trÃªn), 2 load balancers, 2 public ips, &amp;hellip;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://trumhemcut.github.io/images/acs4.png&#34; alt=&#34;Azure container services&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;káº¿t-ná»‘i-Ä‘áº¿n-swarm-master&#34;&gt;Káº¿t ná»‘i Ä‘áº¿n Swarm Master&lt;/h2&gt;

&lt;p&gt;Sau khi Ä‘Ã£ hoÃ n táº¥t quÃ¡ trÃ¬nh deployment, chÃºng ta Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ káº¿t ná»‘i Ä‘áº¿n cluster. Äá»ƒ káº¿t ná»‘i Ä‘áº¿n cluster, chÃºng ta cáº§n Ä‘á»‹a chá»‰ IP Ä‘á»ƒ SSH. chÃºng ta chá»n resource group &lt;strong&gt;test-swarm&lt;/strong&gt;, chá»n &lt;strong&gt;swarm-master-lb-[ID]&lt;/strong&gt; load balancer, nháº¥n &lt;strong&gt;Overview&lt;/strong&gt; vÃ  copy giÃ¡ trá»‹ Public IP Address, vÃ­ dá»¥ cá»§a tÃ´i lÃ  &lt;strong&gt;52.187.69.179&lt;/strong&gt;.
&lt;img src=&#34;https://trumhemcut.github.io/images/acs5.png&#34; alt=&#34;Get load balancer IP Address&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Sau Ä‘Ã³ má»Ÿ terminal, gÃµ lá»‡nh ssh Ä‘á»ƒ káº¿t ná»‘i Ä‘áº¿n swarm cluster:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ssh -L 2375:localhost:2375 -f -N phihuynh@52.187.69.179 -p 2200
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Lá»‡nh nÃ y sáº½ táº¡o ra má»™t SSH Server trÃªn mÃ¡y local vÃ  láº¯ng nghe trÃªn port 2375, sau Ä‘Ã³ forward traffic lÃªn SSH server cá»§a cluster.&lt;/p&gt;

&lt;p&gt;Sau Ä‘Ã³, chÃºng ta cháº¡y tiáº¿p lá»‡nh sau &lt;code&gt;export DOCKER_HOST=:2375&lt;/code&gt; Ä‘á»ƒ lá»‡nh docker client sáº½ chuyá»ƒn hÆ°á»›ng sang localhost:2375&lt;/p&gt;

&lt;p&gt;Ok, Ä‘áº¿n Ä‘Ã¢y lÃ  chÃºng ta Ä‘Ã£ hoÃ n táº¥t káº¿t ná»‘i Ä‘áº¿n swarm cluster. Äá»ƒ kiá»ƒm tra xem káº¿t ná»‘i thÃ nh cÃ´ng hay khÃ´ng, chÃºng ta cháº¡y lá»‡nh &lt;code&gt;docker info&lt;/code&gt; Ä‘á»ƒ xem sá»‘ lÆ°á»£ng nodes cÃ³ pháº£i lÃ  3 hay khÃ´ng.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ docker info
ocker info
Containers: 0
 Running: 0
 Paused: 0
 Stopped: 0
Images: 0
Role: primary
Strategy: spread
Filters: health, port, dependency, affinity, constraint
Nodes: 3
 swarm-agent-BA631D94000000: 10.0.0.4:2375
  â”” Status: Healthy
  â”” Containers: 0
  â”” Reserved CPUs: 0 / 2
  â”” Reserved Memory: 0 B / 7.145 GiB
  â”” Labels: executiondriver=, kernelversion=3.19.0-65-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs
  â”” Error: (none)
  â”” UpdatedAt: 2016-08-23T11:43:31Z
 swarm-agent-BA631D94000002: 10.0.0.6:2375
  â”” Status: Healthy
  â”” Containers: 0
  â”” Reserved CPUs: 0 / 2
  â”” Reserved Memory: 0 B / 7.145 GiB
  â”” Labels: executiondriver=, kernelversion=3.19.0-65-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs
  â”” Error: (none)
  â”” UpdatedAt: 2016-08-23T11:43:34Z
 swarm-agent-BA631D94000003: 10.0.0.7:2375
  â”” Status: Healthy
  â”” Containers: 0
  â”” Reserved CPUs: 0 / 2
  â”” Reserved Memory: 0 B / 7.145 GiB
  â”” Labels: executiondriver=, kernelversion=3.19.0-65-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs
  â”” Error: (none)
  â”” UpdatedAt: 2016-08-23T11:43:54Z
Plugins:
 Volume: 
 Network: 
Swarm: 
 NodeID: 
 Is Manager: false
 Node Address: 
Security Options:
Kernel Version: 3.19.0-65-generic
Operating System: linux
Architecture: amd64
CPUs: 6
Total Memory: 21.44 GiB
Name: 7434ac726bcc
Docker Root Dir: 
Debug Mode (client): false
Debug Mode (server): false
WARNING: No kernel memory limit support
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;cháº¡y-thá»­-má»™t-container&#34;&gt;Cháº¡y thá»­ má»™t container&lt;/h2&gt;

&lt;p&gt;Sau khi káº¿t ná»‘i thÃ nh cÃ´ng, chÃºng ta cháº¡y thá»­ má»™t container ubuntu.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ docker run -it ubuntu bash
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Docker Swarm, aspnet core 1.0 in action</title>
      <link>https://trumhemcut.github.io/2016/06/29/docker-swarm-aspnet-core-1-0-in-action</link>
      <pubDate>Wed, 29 Jun 2016 11:44:08 +0200</pubDate>
      
      <guid>https://trumhemcut.github.io/2016/06/29/docker-swarm-aspnet-core-1-0-in-action</guid>
      <description>

&lt;p&gt;Cuá»‘i cÃ¹ng thÃ¬ Microsoft cÅ©ng ra máº¯t &lt;a href=&#34;https://blogs.msdn.microsoft.com/webdev/2016/06/27/announcing-asp-net-core-1-0/&#34;&gt;aspnet core 1.0&lt;/a&gt;, sau má»™t thá»i gian dÃ i tráº£i qua cÃ¡c version RC1, RC2. NhÆ° cÃ¡c báº¡n cÅ©ng biáº¿t asp.net core cÃ³ nhiá»u tÃ­nh nÄƒng Ä‘Æ°á»£c built-in mÃ  chÃºng ta khÃ´ng pháº£i tÃ¬m kiáº¿m &amp;amp; sá»­ dá»¥ng nhiá»u libraries ngoÃ i nhÆ° asp.net 5. CÃ³ thá»ƒ ká»ƒ ra má»™t vÃ i tÃ­nh nÄƒng nhÆ° sau:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Cháº¡y cross-platform trÃªn Windows, Mac vÃ  Linux&lt;/li&gt;
&lt;li&gt;XÃ¢y dá»±ng trÃªn .NET core, há»— trá»£ side-by-side versioning&lt;/li&gt;
&lt;li&gt;Há»— trá»£ built-in dependency injection&lt;/li&gt;
&lt;li&gt;Tag Helper kiá»ƒu tá»± nhiÃªn nhÆ° HTML data attributes (báº¯t chÆ°á»›c Angular 1 :v )&lt;/li&gt;
&lt;li&gt;CÃ³ thá»ƒ host trÃªn IIS hoáº·c self-host&lt;/li&gt;
&lt;li&gt;KhÃ´ng cÃ²n phÃ¢n biá»‡t giá»¯a MVC/API ná»¯a&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CÃ³ nhiá»u cÃ¡ch / tools Ä‘á»ƒ báº¯t Ä‘áº§u má»™t dá»± Ã¡n dÃ¹ng aspnet core 1.0. ChÃºng ta cÃ³ thá»ƒ dÃ¹ng &lt;a href=&#34;https://www.visualstudio.com/downloads/visual-studio-prerelease-downloads#sec1&#34;&gt;Visual Studio 2015 RC3&lt;/a&gt;, &lt;a href=&#34;https://code.visualstudio.com/&#34;&gt;Visual Studio Code&lt;/a&gt; hoáº·c &lt;a href=&#34;https://eclipse-che.readme.io/&#34;&gt;Eclipse Che&lt;/a&gt; Ä‘á»ƒ viáº¿t code, deploy lÃªn Windows / Linux / Mac hay Docker tÃ¹y thÃ­ch. NÃ³i chung lÃ  cÃ³ mÃ¡y nÃ o xÃ i mÃ¡y Ä‘Ã³, thÃ­ch tool nÃ o xÃ i tool Ä‘Ã³ :), khÃ´ng cÃ²n phá»¥ thuá»™c vÃ o tools hay environment ná»¯a.&lt;/p&gt;

&lt;p&gt;Trong bÃ i nÃ y, tÃ´i sáº½ giá»›i thiá»‡u cÃ¡ch develop má»™t dá»± Ã¡n aspnet core 1.0 dÃ¹ng Visual Studio Code trÃªn Mac, deploy lÃªn Docker Swarm Cluster vÃ  dÃ¹ng Docker Compose Ä‘á»ƒ scale cÃ¡c service trÃªn Swarm Cluster.&lt;/p&gt;

&lt;h2 id=&#34;cÃ i-Ä‘áº·t-net-core-1-0-visual-studio-code-trÃªn-mac&#34;&gt;CÃ i Ä‘áº·t .NET Core 1.0, Visual Studio Code trÃªn Mac&lt;/h2&gt;

&lt;p&gt;Äá»ƒ báº¯t Ä‘áº§u má»™t dá»± Ã¡n aspnet core 1.0 trÃªn Mac, chÃºng ta pháº£i chuáº©n bá»‹ environment nhÆ° sau:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CÃ i Ä‘áº·t .NET Core 1.0 theo hÆ°á»›ng dáº«n &lt;a href=&#34;https://www.microsoft.com/net/core#macos&#34;&gt;á»Ÿ Ä‘Ã¢y&lt;/a&gt;. Sau khi cÃ i Ä‘áº·t xong, dÃ¹ng terminal cháº¡y lá»‡nh &lt;code&gt;dotnet --version&lt;/code&gt; Ä‘á»ƒ kiá»ƒm tra version cá»§a dotnet tool vÃ  náº¿u tháº¥y giÃ¡ trá»‹ lÃ  &lt;strong&gt;1.0.0-preview2-003121&lt;/strong&gt; nghÄ©a lÃ  chÃºng ta Ä‘Ã£ on track.&lt;/li&gt;
&lt;li&gt;CÃ i Ä‘áº·t Visual Studio Code&lt;/li&gt;
&lt;li&gt;CÃ i Ä‘áº·t &lt;a href=&#34;https://nodejs.org/en/&#34;&gt;NodeJS&lt;/a&gt; vÃ  &lt;a href=&#34;http://yeoman.io/&#34;&gt;Yeoman&lt;/a&gt; (optional): bÆ°á»›c nÃ y khÃ´ng báº¯t buá»™c, tuy nhiÃªn tÃ´i khuyáº¿n khÃ­ch sá»­ dá»¥ng Yeoman vÃ¬ ráº¥t thuáº­n tiá»‡n Ä‘á»ƒ táº¡o project structure. Sau khi cÃ i Yeoman xong thÃ¬ cÃ i thÃªm &lt;a href=&#34;https://www.npmjs.com/package/generator-aspnet&#34;&gt;aspnet generator&lt;/a&gt; lÃ  chÃºng ta Ä‘Ã£ sáºµn sÃ ng. Náº¿u Ä‘Ã£ cÃ i yeoman &amp;amp; aspnet generator trÆ°á»›c Ä‘Ã³ thÃ¬ cáº§n update generator Ä‘á»ƒ cÃ³ bá»™ aspnet generator má»›i nháº¥t.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;xin-chÃ o-aspnet-core-1-0&#34;&gt;Xin chÃ o aspnet core 1.0&lt;/h2&gt;

&lt;p&gt;KhÃ¡ dá»… dÃ ng Ä‘á»ƒ báº¯t Ä‘áº§u vá»›i aspnet core 1.0. TrÃªn Mac, má»Ÿ terminal vÃ  gÃµ lá»‡nh &lt;code&gt;yo aspnet&lt;/code&gt;, chá»n &lt;strong&gt;Empty Web Application&lt;/strong&gt;, Ä‘áº·t tÃªn dá»± Ã¡n lÃ  &lt;strong&gt;hello-aspnet&lt;/strong&gt; vÃ  nháº¥n enter. Yeoman sáº½ táº¡o ra má»™t project structure cho chÃºng ta.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ mkdir ~/projects &amp;amp; cd ~/projects
$ yo aspnet

     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
    |       |    â”‚      Welcome to the      â”‚
    |--(o)--|    â”‚  marvellous ASP.NET Core â”‚
   `---------Â´   â”‚        generator!        â”‚
    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
    /___A___\   /
     |  ~  |     
   __&#39;.___.&#39;__   
 Â´   `  |Â° Â´ Y ` 

? What type of application do you want to create? Empty Web Application
? What&#39;s the name of your ASP.NET application? hello-aspnet
   create hello-aspnet/.gitignore
   create hello-aspnet/Program.cs
   create hello-aspnet/Startup.cs
   create hello-aspnet/project.json
   create hello-aspnet/web.config
   create hello-aspnet/Dockerfile
   create hello-aspnet/Properties/launchSettings.json
   create hello-aspnet/README.md


Your project is now created, you can use the following commands to get going
    cd &amp;quot;hello-aspnet&amp;quot;
    dotnet restore
    dotnet build (optional, build will also happen when it&#39;s run)
    dotnet run
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Sau Ä‘Ã³ chÃºng tao vÃ o thÆ° má»¥c &lt;strong&gt;hello-aspnet&lt;/strong&gt; vÃ  cháº¡y cÃ¡c lá»‡nh &lt;code&gt;dotnet restore&lt;/code&gt;, &lt;code&gt;dotnet build&lt;/code&gt; vÃ  &lt;code&gt;dotnet run&lt;/code&gt; Ä‘á»ƒ cháº¡y dá»± Ã¡n.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;âœ  hello-aspnet dotnet run
Project hello-aspnet (.NETCoreApp,Version=v1.0) was previously compiled. Skipping compilation.
Hosting environment: Production
Content root path: /Users/phihuynh/projects/hello-aspnet
Now listening on: http://localhost:5000
Application started. Press Ctrl+C to shut down.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:5000/  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 88.3022ms 20
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Sau Ä‘Ã³, má»Ÿ trÃ¬nh duyá»‡t vÃ  nháº­p vÃ o Ä‘á»‹a chá»‰ &lt;code&gt;http://localhost:5000&lt;/code&gt; lÃ  chÃºng ta Ä‘Ã£ cÃ³ web app Ä‘áº§u tiÃªn cháº¡y trÃªn aspnet core 1.0.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://trumhemcut.github.io/images/aspnetcore01.png&#34; alt=&#34;say hello to aspnet core&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;xin-chÃ o-docker&#34;&gt;Xin chÃ o Docker&lt;/h2&gt;

&lt;p&gt;ChÃºng ta Ä‘Ã£ cÃ³ thá»ƒ say hello vá»›i aspnet core 1.0 trÃªn Mac, giá» chÃºng ta tiáº¿p tá»¥c báº¯t Ä‘áº§u vá»›i Docker. TÃ´i giáº£ sá»­ lÃ  chÃºng ta Ä‘Ã£ lÃ  quen sÆ¡ sÆ¡ vá»›i Docker rá»“i nÃªn sáº½ khÃ´ng nÃ³i nhiá»u vá» benefits cá»§a Docker ná»¯a.&lt;/p&gt;

&lt;p&gt;Äá»ƒ cháº¡y hello-aspnet app vá»«a rá»“i trÃªn Docker, cÆ¡ báº£n chÃºng ta sáº½ Ä‘i qua cÃ¡c bÆ°á»›c nhÆ° sau:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;CÃ i Ä‘áº·t Docker Toolbox, bá»™ Docker Toolbox sáº½ bao gá»“m Docker Machine, Kitematic &amp;amp; VirtualBox&lt;/li&gt;
&lt;li&gt;DÃ¹ng &lt;strong&gt;docker-machine&lt;/strong&gt; Ä‘á»ƒ táº¡o ra má»™t mÃ¡y áº£o boot2docker&lt;/li&gt;
&lt;li&gt;Build image cho app hello-aspnet&lt;/li&gt;
&lt;li&gt;Deploy hello-aspnet app lÃªn Docker báº±ng docker commands&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;cÃ i-Ä‘áº·t-docker-toolbox&#34;&gt;CÃ i Ä‘áº·t Docker Toolbox&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.docker.com/products/docker-toolbox&#34;&gt;Docker Toolbox&lt;/a&gt; cÃ³ 2 phiÃªn báº£n cho Windows &amp;amp; Mac. ChÃºng ta lá»±a chá»n phiÃªn báº£n phÃ¹ há»£p vá»›i OS cá»§a mÃ¬nh. Sau khi cÃ i xong, chÃºng ta sáº½ cÃ³ Docker Machine, Kitematic &amp;amp; Virtualbox Ä‘á»ƒ sáº³n sÃ ng táº¡o mÃ¡y áº£o.&lt;/p&gt;

&lt;h3 id=&#34;táº¡o-mÃ¡y-áº£o-báº±ng-docker-machine&#34;&gt;Táº¡o mÃ¡y áº£o báº±ng docker-machine&lt;/h3&gt;

&lt;p&gt;Sau khi Ä‘Ã£ cÃ i Docker Toolbox, má»Ÿ terminal lÃªn, dÃ¹ng lá»‡nh sau Ä‘á»ƒ táº¡o mÃ¡y áº£o&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ docker-machine create -d virtualbox docker00 
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Azure Automation hay lÃ  PowerShell as a service</title>
      <link>https://trumhemcut.github.io/2014/10/31/azure-automation-hay-la-powershell-as-a-service</link>
      <pubDate>Fri, 31 Oct 2014 10:20:00 +0000</pubDate>
      
      <guid>https://trumhemcut.github.io/2014/10/31/azure-automation-hay-la-powershell-as-a-service</guid>
      <description>

&lt;h2 id=&#34;giá»›i-thiá»‡u-vá»-azure-automation&#34;&gt;Giá»›i thiá»‡u vá» Azure Automation&lt;/h2&gt;

&lt;p&gt;Microsoft thÃ´ng bÃ¡o lÃ  Ä‘Ã£ cho ra máº¯t liá»n tÃ¹ tÃ¬ cáº£ lá»‘ dá»‹ch vá»¥ má»›i, Ä‘á»c mÃ  chÃ³ng cáº£ máº·t. Tháº¿ lÃ  láº¡i láº·n lá»™i tÃ¬m xem cÃ³ gÃ¬ hay, Ä‘á»c sÆ¡ qua cÃ¡i sá»› thÃ¬ tháº¥y cÃ³ em Azure Automation lÃ  gÃ¢y áº¥n tÆ°á»£ng máº¡nh nháº¥t. MÃ² ngay :))&lt;/p&gt;

&lt;p&gt;Azure Automation giÃºp cho cÃ¡c developer (hoáº·c DevOps) tá»± Ä‘á»™ng hÃ³a cÃ¡c cÃ´ng viá»‡c láº­p Ä‘i láº­p láº¡i hÃ ng ngÃ y, cÃ¡c tÃ¡c vá»¥ máº¥t nhiá»u thá»i gian (long-running) hoáº·c cÃ¡c tÃ¡c vá»¥ mÃ  chÃºng ta lÃ m thÆ°á»ng máº¯c lá»—i (vÃ­ dá»¥ nhÆ° lÃ  chá»‰nh sá»­a cÃ¡c thÃ´ng tin cáº¥u hÃ¬nh má»—i láº§n deployment). ChÃºng ta cÃ³ thá»ƒ dá»… dÃ ng create / deploy / monitoring / maintenance cÃ¡c resources trÃªn mÃ´i trÆ°á»ng Microsoft Azure dÃ¹ng ngÃ´n ngá»¯ PowerShell (chÃ­nh xÃ¡c lÃ  PowerShell Workflow). Theo tÃ´i tháº¥y thÃ¬ Auzure Automation cÅ©ng káº¿t há»£p cáº£ Azure Scheduler Ä‘á»ƒ kÃ­ch hoáº¡t cháº¡y cÃ¡c tÃ¡c vá»¥ trÃªn Azure Automation.&lt;/p&gt;

&lt;p&gt;RÃµ rÃ ng PowerShell ngÃ y cÃ ng trá»Ÿ nÃªn quan trá»ng trong há»‡ sinh thÃ¡i cá»§a Microsoft. Viá»‡c Microsoft Ä‘Æ°a PowerShell phá»¥c vá»¥ cho cÃ¡c tÃ¡c vá»¥ tá»± Ä‘á»™ng hÃ³a trÃªn mÃ´i trÆ°á»ng Azure sáº½ nÃ¢ng táº§m lÃªn má»™t bÆ°á»›c ná»¯a, mÃ  tÃ´i xin Ä‘áº·t tÃªn má»™t cÃ¡ch vui váº» lÃ  PowerShell-As-A-Service (nháº¡i theo Everything Is A Service ğŸ™‚ )&lt;/p&gt;

&lt;h2 id=&#34;lá»£i-Ã­ch-khi-sá»­-dá»¥ng-azure-automation&#34;&gt;Lá»£i Ã­ch khi sá»­ dá»¥ng Azure Automation&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Tiáº¿t kiá»‡m thá»i gian vÃ  tiá»n báº¡c vá»›i Automation&lt;/li&gt;
&lt;li&gt;Loáº¡i bá» cÃ¡c cÃ´ng viá»‡c tay chÃ¢n láº·p Ä‘i láº·p láº¡i, cÃ¡c cÃ´ng viá»‡c tay chÃ¢n dá»… máº¯c lá»—i hoáº·c cÃ¡c tÃ¡c vá»¥ long-runing&lt;/li&gt;
&lt;li&gt;NÃ¢ng cao hiá»‡u quáº£ vÃ  Ä‘á»™ tin cáº­y&lt;/li&gt;
&lt;li&gt;TÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c dá»‹ch vá»¥ cá»§a Azure vÃ  cÃ¡c third-party dÃ¹ng PowerShell&lt;/li&gt;
&lt;li&gt;TÄƒng kháº£ nÄƒng sáºµn sÃ ng&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;chÃ­nh-sÃ¡ch-giÃ¡-cá»§a-azure-automation&#34;&gt;ChÃ­nh sÃ¡ch giÃ¡ cá»§a Azure Automation&lt;/h2&gt;

&lt;p&gt;CÃ³ 2 gÃ³i, Free vÃ  Standard, hiá»‡n táº¡i gÃ³i Standard Ä‘ang Ä‘Æ°á»£c dÃ¹ng thá»­ miá»…n phÃ­ cho Ä‘áº¿n cuá»‘i thÃ¡ng 11. Thá»­ ngay nhÃ©, náº¿u khÃ´ng thÃ¬ chÃºng ta váº«n cÃ²n cÆ¡ há»™i xÃ i chÃ¹a vÃ¬ Ä‘Ã£ cÃ³ gÃ³i Free, chi tiáº¿t nhÆ° sau:
&lt;img src=&#34;https://trumhemcut.github.io/images/azurepowershell01.png&#34; alt=&#34;Container in visualizer&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;báº¡n-cáº§n-pháº£i-chuáº©n-bá»‹-gÃ¬-Ä‘á»ƒ-báº¯t-Ä‘áº§u-vá»›i-azure-automation&#34;&gt;Báº¡n cáº§n pháº£i chuáº©n bá»‹ gÃ¬ Ä‘á»ƒ báº¯t Ä‘áº§u vá»›i Azure Automation?&lt;/h2&gt;

&lt;p&gt;Äá»ƒ báº¯t Ä‘áº§u cáº§n pháº£i chuáº©n bá»‹ cÃ¡c bÆ°á»›c sau:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ÄÄƒng kÃ½ account dÃ¹ng thá»­ Microsoft Azure (dÄ© nhiÃªn roÃ i hehe)&lt;/li&gt;
&lt;li&gt;KÃ­ch hoáº¡t dÃ¹ng thá»­ Azure Automation&lt;/li&gt;
&lt;li&gt;Báº¡n pháº£i biáº¿t cÆ¡ báº£n kiáº¿n thá»©c vá» PowerShell&lt;/li&gt;
&lt;li&gt;Náº¿u Ä‘Ã£ dÃ¹ng thá»­ Azure Scheduler rá»“i lÃ  má»™t lá»£i tháº¿&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>TÆ°Æ¡ng tÃ¡c vá»›i Azure Scheduler dÃ¹ng Azure Active Directory</title>
      <link>https://trumhemcut.github.io/2014/10/27/tuong-tac-voi-azure-scheduler-dung-azure-ad</link>
      <pubDate>Mon, 27 Oct 2014 18:00:00 +0000</pubDate>
      
      <guid>https://trumhemcut.github.io/2014/10/27/tuong-tac-voi-azure-scheduler-dung-azure-ad</guid>
      <description>

&lt;h2 id=&#34;giá»›i-thiá»‡u-azure-active-directory&#34;&gt;Giá»›i thiá»‡u Azure Active Directory&lt;/h2&gt;

&lt;p&gt;Azure Active Directory (AAD) lÃ  má»™t giáº£i phÃ¡p cloud mÃ  Microsoft Ä‘Æ°a ra Ä‘á»ƒ quáº£n lÃ½ identity &amp;amp; access má»™t cÃ¡ch toÃ n diá»‡n. Báº¡n cÃ³ thá»ƒ dÃ¹ng AAD Ä‘á»ƒ quáº£n lÃ½ users &amp;amp; groups, quyá»n truy cáº­p vÃ o cÃ¡c app cá»§a báº¡n má»™t cÃ¡ch dá»… dÃ ng. HÃ´m nay tÃ´i sáº½ giá»›i thiá»‡u cÃ¡ch truy cáº­p vÃ o Azure Scheduler REST API dÃ¹ng OAuth 2.0.&lt;/p&gt;

&lt;h2 id=&#34;táº¡o-app-má»›i-trong-azure-directory&#34;&gt;Táº¡o App má»›i trong Azure Directory&lt;/h2&gt;

&lt;p&gt;Äá»ƒ truy cáº­p vÃ o REST API service cá»§a Azure Scheduler, chÃºng ta pháº£i táº¡o ra má»™t App trong AAD, sau Ä‘Ã³ sáº½ cáº¥p phÃ©p cho App nÃ y truy cáº­p vÃ o REST API Services. Thao tÃ¡c cÃ¡c bÆ°á»›c sau Ä‘á»ƒ táº¡o ra má»™t App trong AAD:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ÄÄƒng nháº­p vÃ o Microsoft Azure (manage.windowsazure.com)&lt;/li&gt;
&lt;li&gt;Tá»« menu bÃªn trÃ¡i á»Ÿ trang chÃ­nh cá»§a Microsoft Azure, chá»n má»¥c Active Directory, sau Ä‘Ã³ chá»n Default Directory, sáº½ tháº¥y hÃ¬nh nhÆ° bÃªn dÆ°á»›i:
&lt;img src=&#34;https://trumhemcut.github.io/images/as01.png&#34; alt=&#34;Azure AD&#34; /&gt;&lt;/li&gt;
&lt;li&gt;Chá»n tab Applications, sau Ä‘Ã³ nháº¥n nÃºt Add, chá»n Add an application my organization is developing&lt;/li&gt;
&lt;li&gt;Äáº·t tÃªn cho Application, vÃ­ dá»¥: TestAzureScheduler, chá»n NATIVE CLIENT APPLICATION
&lt;img src=&#34;https://trumhemcut.github.io/images/as02.png&#34; alt=&#34;Azure AD&#34; /&gt;&lt;/li&gt;
&lt;li&gt;Sau Ä‘Ã³ nháº¥n biá»ƒu tÆ°á»£ng Next&lt;/li&gt;
&lt;li&gt;Nháº­p vÃ o Redirect URI, vÃ­ dá»¥: &lt;a href=&#34;http://localhost/testazurescheduler&#34;&gt;http://localhost/testazurescheduler&lt;/a&gt;, nháº¥n OK Ä‘á»ƒ hoÃ n táº¥t táº¡o app&lt;/li&gt;
&lt;li&gt;Tá»« cá»­a sá»• cá»§a app TestAzureScheduler, chá»n tab configure vÃ  copy Client ID
&lt;img src=&#34;https://trumhemcut.github.io/images/as03.png&#34; alt=&#34;Azure AD&#34; /&gt;&lt;/li&gt;
&lt;li&gt;CÅ©ng á»Ÿ trang configure application, báº¡n kÃ©o xuá»‘ng dÆ°á»›i Ä‘áº¿n má»¥c permissions to other applications chá»n Windows Azure Service Management API vÃ  chá»n Access Azure Service Management. Nháº¥n Save Ä‘á»ƒ hoÃ n táº¥t quÃ¡ trÃ¬nh táº¡o Application má»›i.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;láº¥y-access-token&#34;&gt;Láº¥y Access Token&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Má»Ÿ Visual Studio (2013), táº¡o má»™t Console Project má»›i, Ä‘áº·t tÃªn lÃ  TestAzureScheduler2&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Má»Ÿ file program.cs, thÃªm vÃ o hÃ m bÃªn dÆ°á»›i:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private static string GetAccessToken()
{
var tenantId = &amp;quot;d8ac9062-da58-40c7-87f3-2ddea9fa470f&amp;quot;;
var clientId = &amp;quot;d5690d98-0aea-4596-88de-24e88c53c5a5&amp;quot;;
var redirectUri = &amp;quot;http://localhost/testazurescheduler&amp;quot;;
 
var context = new AuthenticationContext(
    string.Format(
    &amp;quot;https://login.windows.net/{0}/oauth2/token?api-version=1.0&amp;quot;,
    tenantId));
 
var result = context.AcquireToken(
    &amp;quot;https://management.core.windows.net/&amp;quot;,
    clientId,
    new Uri(redirectUri));
 
if (result == null)
    throw new InvalidOperationException(&amp;quot;Failed to obtain the JWT token&amp;quot;);
 
return result.AccessToken;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Trong Ä‘Ã³ chÃºng ta sáº½ láº¥y tenantId tá»« trang Default Directory, chá»n View Endpoints
&lt;img src=&#34;https://trumhemcut.github.io/images/as04.png&#34; alt=&#34;Azure AD&#34; /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;gá»­i-request-lÃªn-azure-scheduler-dÃ¹ng-access-token&#34;&gt;Gá»­i request lÃªn Azure Scheduler dÃ¹ng Access Token&lt;/h2&gt;

&lt;p&gt;Sau khi Ä‘Ã£ cÃ³ Ä‘Æ°á»£c Token rá»“i, thÃ¬ viá»‡c gá»­i request lÃªn Azure Scheduler REST API cÅ©ng giá»‘ng nhÆ° bÃ i trÆ°á»›c , báº¡n thÃªm Ä‘oáº¡n code sau vÃ o hÃ m Main&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;static void Main(string[] args)
{
  var token = GetAccessToken();
  
  var apiVersion = &amp;quot;api-version=2014-04-01&amp;quot;;
  var uri = string.Format(
  &amp;quot;https://management.core.windows.net/3a030e09-3eb5-4224-b282-746af502fb55/cloudservices/CS-SoutheastAsia-scheduler/resources/scheduler/~/JobCollections/jc1?{0}&amp;quot;,
  apiVersion);
  
  using (var client = new HttpClient())
  {
    client.DefaultRequestHeaders.Add(&amp;quot;Authorization&amp;quot;, &amp;quot;Bearer &amp;quot; + token);
    client.DefaultRequestHeaders.Add(&amp;quot;x-ms-version&amp;quot;, &amp;quot;2013-03-01&amp;quot;);
    HttpResponseMessage response = client.GetAsync(uri).Result;
    if (response.IsSuccessStatusCode)
    {
      var result = response.Content.ReadAsStringAsync().Result;
      Console.WriteLine(result);
    }
  }
  
  Console.ReadLine();
}
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>TÆ°Æ¡ng tÃ¡c vá»›i Azure Scheduler qua .NET Client</title>
      <link>https://trumhemcut.github.io/2014/10/27/tuong-tac-voi-azure-scheduler-qua-net-client</link>
      <pubDate>Mon, 27 Oct 2014 18:00:00 +0000</pubDate>
      
      <guid>https://trumhemcut.github.io/2014/10/27/tuong-tac-voi-azure-scheduler-qua-net-client</guid>
      <description>

&lt;h2 id=&#34;giá»›i-thiá»‡u&#34;&gt;Giá»›i thiá»‡u&lt;/h2&gt;

&lt;p&gt;Azure Scheduler giÃºp chÃºng ta táº¡o cÃ¡c Job vÃ  thá»±c thi chÃºng theo cÃ¡ch khÃ´ng thá»ƒ dá»… dÃ ng hÆ¡n. Náº¿u ai Ä‘Ã£ tá»«ng lÃ m Windows Services hoáº·c cÃ¡c background services thÃ¬ vá»›i Azure Scheduler, cÃ³ láº½ chÃºng ta sáº½ khÃ´ng cÃ²n cáº§n Ä‘áº¿n chÃºng ná»¯a ğŸ™‚ HÃ´m nay tÃ´i xin giá»›i thiá»‡u vá»›i cÃ¡c báº¡n cÃ¡ch tÆ°Æ¡ng tÃ¡c vá»›i Azure Scheduler qua .NET Client.&lt;/p&gt;

&lt;h2 id=&#34;táº¡o-certificate-vÃ -import-vÃ o-msdn-subscription&#34;&gt;Táº¡o Certificate vÃ  Import vÃ o MSDN Subscription&lt;/h2&gt;

&lt;p&gt;Sau khi Ä‘Ã£ chuáº©n bá»‹ Certificate xong rá»“i, chÃºng ta báº¯t Ä‘áº§u táº¡o má»™t Project, chÃºng ta sáº½ theo cÃ¡c bÆ°á»›c sau Ä‘á»ƒ láº¥y thÃ´ng tin má»™t Certificate trong C#:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Má»Ÿ Visual Studio (2013), nháº¥n vÃ o File, New, Project&lt;/li&gt;
&lt;li&gt;Chá»n Templates, Visual C#, Console Application. Äáº·t tÃªn project lÃ  TestAzureScheduler, sau Ä‘Ã³ nháº¥n OK.
&lt;img src=&#34;https://trumhemcut.github.io/images/asn01.png&#34; alt=&#34;Visual Studio&#34; /&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Má»Ÿ file Program.cs, chÃºng ta thÃªm vÃ o hÃ m sau Ä‘á»ƒ Ä‘á»c thÃ´ng tin Certificate. Äá»ƒ biáº¿t thÃªm chi tiáº¿t vá» hÃ m nÃ y, cÃ¡c báº¡n Ä‘á»c thÃªm thÃ´ng tin táº¡i &lt;a href=&#34;http://msdn.microsoft.com/library/azure/ee460782.aspx&#34;&gt;http://msdn.microsoft.com/library/azure/ee460782.aspx&lt;/a&gt; (má»¥c Authenticate using a management certificate)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private static X509Certificate2 GetStoreCertificate(string thumbprint)
{
List&amp;lt;StoreLocation&amp;gt; locations = new List&amp;lt;StoreLocation&amp;gt;
{
    StoreLocation.CurrentUser, 
    StoreLocation.LocalMachine
};

foreach (var location in locations)
{
    X509Store store = new X509Store(&amp;quot;My&amp;quot;, location);
    try
    {
        store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);
        X509Certificate2Collection certificates = store.Certificates.Find(
            X509FindType.FindByThumbprint, thumbprint, false);
        if (certificates.Count == 1)
        {
            return certificates[0];
        }
    }
    finally
    {
        store.Close();
    }
}
throw new ArgumentException(string.Format(
    &amp;quot;A Certificate with Thumbprint &#39;{0}&#39; could not be located.&amp;quot;,
    thumbprint));
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;HÃ m trÃªn cÃ³ má»™t thÃ´ng sá»‘ lÃ  thumbprint, Ä‘Ã¢y chÃ­nh lÃ  thÃ´ng tin thumbprint cá»§a Certificate mÃ  chÃºng ta Ä‘Ã£ táº¡o ra á»Ÿ bÃ i trÆ°á»›c. Äá»ƒ láº¥y thÃ´ng tin nÃ y, chÃºng ta nháº¥n Windows+R, sau Ä‘Ã³ gÃµ vÃ o certmgr.msc vÃ  nháº¥n Enter. Cá»­a sá»• Certificates Management sáº½ hiá»ƒn thá»‹ lÃªn, chÃºng ta tiáº¿p tá»¥c chá»n Personal, Certificates á»Ÿ cá»­a sá»• phÃ­a trÃ¡i. Khi Ä‘Ã³ á»Ÿ cá»­a sá»• pháº£i, sáº½ xuáº¥t hiá»‡n DevTest Certificate nhÆ° hÃ¬nh dÆ°á»›i.
&lt;img src=&#34;https://trumhemcut.github.io/images/asn02.png&#34; alt=&#34;Certificates&#34; /&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Nháº¥n Ä‘Ã´i chuá»™t vÃ o DevTest Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t cá»§a Certificate, chá»n tab Details, kÃ©o scroll bar xuá»‘ng dÆ°á»›i cÃ¹ng thÃ¬ chÃºng ta sáº½ tháº¥y thÃ´ng tin cá»§a Thumbprint, nháº¥n vÃ o má»¥c Thumbprint, chÃºng ta sáº½ tháº¥y ná»™i dung thÃ´ng tin cá»§a Thumbprint nhÆ° hÃ¬nh sau:
&lt;img src=&#34;https://trumhemcut.github.io/images/asn03.png&#34; alt=&#34;Certificate&#34; /&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Copy ná»™i dung cá»§a Thumbprint, vÃ  paste vÃ o hÃ m Main trong Program.cs nhÆ° sau:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;static void Main(string[] args)
{
var certificate = GetStoreCertificate(&amp;quot;0c 0c 8b 3d 83 f1 16 dd fe 84 a5 c4 96 f7 1a 62 59 f1 d8 fe&amp;quot;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;táº¡o-request-Ä‘áº¿n-azure-scheduler-rest-api&#34;&gt;Táº¡o request Ä‘áº¿n Azure Scheduler REST API&lt;/h2&gt;

&lt;p&gt;Äáº¿n Ä‘Ã¢y thÃ¬ ta Ä‘Ã£ chuáº©n bá»‹ xong vá»¥ Certificate, tiáº¿p theo lÃ  sáº½ táº¡o má»™t HttpRequest Ä‘áº¿n Azure Scheduler REST API. Tiáº¿p tá»¥c cÃ¡c bÆ°á»›c sau:&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Tá»« Visual Studio, nháº¥n chuá»™t pháº£i vÃ o project TestAzureScheduler chá»n Manage Nuget Packagesâ€¦&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Tá»« cá»­a sá»• Manage Nuget Packages, má»¥c bÃªn trÃ¡i ta chá»n Online, á»Ÿ cá»­a sá»• tÃ¬m kiáº¿m gÃµ vÃ o HttpClient, sau Ä‘Ã³ sáº½ hiá»ƒn thá»‹ Microsoft HTTP Client Libraries, chá»n má»¥c nÃ y vÃ  nháº¥n Install, nháº¥n I Accept Ä‘á»ƒ cÃ i library nÃ o vÃ o project, sau Ä‘Ã³ nháº¥n Close&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Sau Ä‘Ã³, chÃºng ta sáº½ thÃªm mÃ£ Ä‘á»ƒ táº¡o ra má»™t request Ä‘áº¿n Azure Scheduler REST API nhÆ° sau:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;static void Main(string[] args)
{
var certificate = GetStoreCertificate(&amp;quot;0c 0c 8b 3d 83 f1 16 dd fe 84 a5 c4 96 f7 1a 62 59 f1 d8 fe&amp;quot;);
 
var apiVersion = &amp;quot;api-version=2014-04-01&amp;quot;;
var uri = string.Format(&amp;quot;https://management.core.windows.net/3a030e09-3eb5-4224-b282-746af502fb55/cloudservices/CS-SoutheastAsia-scheduler/resources/scheduler/~/JobCollections/jc1?{0}&amp;quot;, apiVersion);
 
var handler = new WebRequestHandler();
handler.ClientCertificates.Add(certificate);
using (var client = new HttpClient(handler))
{
    client.DefaultRequestHeaders.Add(&amp;quot;x-ms-version&amp;quot;, &amp;quot;2013-03-01&amp;quot;);
    HttpResponseMessage response = client.GetAsync(uri).Result;
    if (response.IsSuccessStatusCode)
    {
        var result = response.Content.ReadAsStringAsync().Result;
        Console.WriteLine(result);
    }
}
 
Console.ReadLine();
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;and-run&#34;&gt;AND RUN &amp;hellip;&lt;/h2&gt;

&lt;p&gt;ChÃºng ta cháº¡y thá»­ chÆ°Æ¡ng trÃ¬nh, nÃ³ sáº½ gá»­i request Ä‘áº¿n Azure Scheduler REST API vÃ  tráº£ vá» danh sÃ¡ch cÃ¡c job Ä‘ang cÃ³ ğŸ™‚
&lt;img src=&#34;https://trumhemcut.github.io/images/asn04.png&#34; alt=&#34;Program&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Happy coding :)))&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>TÆ°Æ¡ng tÃ¡c vá»›i Azure Scheduler qua REST API dÃ¹ng Fiddler</title>
      <link>https://trumhemcut.github.io/2014/10/22/tuong-tac-voi-azure-scheduler-qua-rest-dung-fiddler</link>
      <pubDate>Wed, 22 Oct 2014 15:00:00 +0000</pubDate>
      
      <guid>https://trumhemcut.github.io/2014/10/22/tuong-tac-voi-azure-scheduler-qua-rest-dung-fiddler</guid>
      <description>

&lt;h2 id=&#34;giá»›i-thiá»‡u-vá»-windows-azure-scheduler&#34;&gt;Giá»›i thiá»‡u vá» Windows Azure Scheduler&lt;/h2&gt;

&lt;p&gt;Azure Scheduler cho phÃ©p chÃºng ta táº¡o ra cÃ¡c jobs trÃªn cloud Ä‘á»ƒ gá»i cÃ¡c services bÃªn trong hoáº·c ngoÃ i Microsoft Azure. VÃ­ dá»¥ nhÆ° Azure Scheduler cÃ³ thá»ƒ gá»i cÃ¡c request HTTP/HTTPS enpoints hoáº·c gá»­i cÃ¡c message Ä‘áº¿n Azure Storage Queue. Báº¡n cÃ³ thá»ƒ cháº¡y job ngay láº­p tá»©c, hoáº·c theo má»™t lá»‹ch nÃ o Ä‘Ã³, hoáº·c vÃ o má»™t thá»i Ä‘iá»ƒm nÃ o Ä‘Ã³ á»Ÿ tÆ°Æ¡ng lai.&lt;/p&gt;

&lt;h2 id=&#34;quáº£n-lÃ½-azure-scheduler-báº±ng-cÃ¡ch-nÃ o&#34;&gt;Quáº£n lÃ½ Azure Scheduler báº±ng cÃ¡ch nÃ o?&lt;/h2&gt;

&lt;p&gt;Báº¡n cÃ³ thá»ƒ quáº£n lÃ½ Azure Scheduler báº±ng cÃ¡c cÃ¡ch sau:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;REST API&lt;/li&gt;
&lt;li&gt;.NET Client&lt;/li&gt;
&lt;li&gt;PowerShell&lt;/li&gt;
&lt;li&gt;xpat-cli&lt;/li&gt;
&lt;li&gt;Azure Portal&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;DÃ¹ng Azure Portal dÄ© nhiÃªn lÃ  cÃ¡ch Ä‘Æ¡n giáº£n vÃ  trá»±c quan nháº¥t, cÃ¡c báº¡n cÃ³ thá»ƒ login vÃ o Azure Portal rá»“i táº¡o Job Collection má»›i, sau Ä‘Ã³ táº¡o cÃ¡c job má»›i. HÃ´m nay mÃ¬nh muá»‘n giá»›i thiá»‡u dÃ¹ng REST API Ä‘á»ƒ táº¡o cÃ¡c job má»›i.&lt;/p&gt;

&lt;h2 id=&#34;táº¡o-má»™t-management-certificate-vÃ -import-vÃ o-subscription&#34;&gt;Táº¡o má»™t Management Certificate vÃ  import vÃ o Subscription&lt;/h2&gt;

&lt;p&gt;Äá»ƒ cÃ³ thá»ƒ gá»i REST API, trÆ°á»›c tiÃªn cáº§n pháº£i authenticate cÃ¡c request. CÆ¡ báº£n cÃ³ 2 cÃ¡ch Ä‘á»ƒ authenticate request REST API, má»™t lÃ  dÃ¹ng Windows Azure AD, hai lÃ  dÃ¹ng management certificate. BÃ i nÃ y tÃ´i xin giá»›i thiá»‡u dÃ¹ng cÃ¡ch thá»© 2. Báº¡n cÃ³ thá»ƒ tham kháº£o 2 cÃ¡ch nÃ y á»Ÿ &lt;a href=&#34;http://msdn.microsoft.com/library/azure/ee460782.aspx&#34;&gt;http://msdn.microsoft.com/library/azure/ee460782.aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Äá»ƒ import certificate vÃ o Azure Subscription, chÃºng ta sáº½ táº¡o ra má»™t certificate trÆ°á»›c, vÃ  pháº£i import vÃ o má»¥c Personal, chi tiáº¿t xem táº¡i &lt;a href=&#34;http://msdn.microsoft.com/en-US/library/azure/gg551722.aspx&#34;&gt;http://msdn.microsoft.com/en-US/library/azure/gg551722.aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Äá»ƒ táº¡o má»™t certificate, lÃ m theo cÃ¡c bÆ°á»›c sau:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Má»Ÿ CMD&lt;/li&gt;
&lt;li&gt;GÃµ lá»‡nh makecert -sky exchange -r -n â€œCN=DevTestâ€ -pe -a sha1 -len 2048 -ss My â€œDevTest.cerâ€ . Lá»‡nh nÃ y sáº½ táº¡o ra má»™t Certificate lÃ  DevTest vÃ  lÆ°u trong thÆ° má»¥c Personal cá»§a Certificate Management.&lt;/li&gt;
&lt;li&gt;Nháº¥n Windows+R rá»“i gÃµ vÃ o certmgr.msc Ä‘á»ƒ má»Ÿ Certificate Management&lt;/li&gt;
&lt;li&gt;VÃ o thÆ° má»¥c Certificates -&amp;gt; Personal -&amp;gt; Certificates, chÃºng ta sáº½ tháº¥y má»™t certificate tÃªn lÃ  DevTest má»›i vá»«a táº¡o.&lt;/li&gt;
&lt;li&gt;Nháº¥n chuá»™t pháº£i vÃ o DevTest, chá»n All Tasks, sau Ä‘Ã³ chá»n Export, nháº¥n Next, Next, Next vÃ  nháº­p vÃ o tÃªn file Ä‘á»ƒ export. VÃ­ dá»¥: C:\Users\phihuynh\Desktop\DevTest.cer, sau Ä‘Ã³ nháº¥n Next, Finish
&lt;img src=&#34;https://trumhemcut.github.io/images/asr01.png&#34; alt=&#34;Certificates&#34; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;import-certificate-vÃ o-azure-subscription&#34;&gt;Import certificate vÃ o Azure Subscription&lt;/h2&gt;

&lt;p&gt;Sau khi  Ä‘Ã£ táº¡o ra má»™t certificate vÃ  export nÃ³ ra mÃ n hÃ¬nh desktop, bÆ°á»›c káº¿ tiáº¿p lÃ  import nÃ³ vÃ o Azure Subscription, theo cÃ¡c bÆ°á»›c nhÆ° sau:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ÄÄƒng nháº­p vÃ o manage.windowsazure.com&lt;/li&gt;
&lt;li&gt;Chá»n má»¥c Settings, nháº¥n vÃ o Management Certificates, sau Ä‘Ã³ chá»n Upload vÃ  chá»n file DevTest.cer vá»«a export á»Ÿ Desktop vÃ  nháº¥n dáº¥u Checked Ä‘á»ƒ upload.
&lt;img src=&#34;https://trumhemcut.github.io/images/asr02.png&#34; alt=&#34;Upload Certificate&#34; /&gt;&lt;/li&gt;
&lt;li&gt;Sau khi upload thÃ nh cÃ´ng sáº½ cÃ³ mÃ n hÃ¬nh nhÆ° bÃªn dÆ°á»›i:
&lt;img src=&#34;https://trumhemcut.github.io/images/asr03.png&#34; alt=&#34;Upload Certificate&#34; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;gá»i-azure-scheduler-rest-api-dÃ¹ng-fiddler&#34;&gt;Gá»i Azure Scheduler REST API dÃ¹ng Fiddler&lt;/h2&gt;

&lt;p&gt;Sau khi Ä‘Ã£ chuáº©n bá»‹ xong certificate, báº¡n pháº£i copy certificate vÃ o thÆ° má»¥c C:\Users\phihuynh\Documents\Fiddler2 Ä‘á»ƒ Fiddler sáº½ dÃ¹ng certificate nÃ y Ä‘á»ƒ mÃ£ hÃ³a cÃ¡c request vÃ  gá»­i lÃªn Azure Scheduler server.&lt;/p&gt;

&lt;p&gt;Äá»ƒ gá»­i má»™t request lÃªn Azure Scheduler cÅ©ng giá»‘ng nhÆ° cÃ¡c request bÃ¬nh thÆ°á»ng khÃ¡c, chá»‰ cÃ³ 2 Ä‘iá»ƒm cáº§n lÆ°u Ã½:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;URL Parameter: ?api-version=2014-04-01
Header: x-ms-version: 2013-03-01
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;https://trumhemcut.github.io/images/asr04.png&#34; alt=&#34;Upload Certificate&#34; /&gt;
Káº¿t quáº£ tráº£ vá» nhÆ° sau
&lt;img src=&#34;https://trumhemcut.github.io/images/asr05.png&#34; alt=&#34;Upload Certificate&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;káº¿t-luáº­n&#34;&gt;Káº¿t luáº­n&lt;/h2&gt;

&lt;p&gt;CÅ©ng giá»‘ng nhÆ° táº¥t cáº£ cÃ¡c REST API Service khÃ¡c, chÃºng ta cáº§n chuáº©n bá»‹ cÃ¡c bÆ°á»›c Ä‘á»ƒ authenticate trÆ°á»›c. Sau Ä‘Ã³ thÃ¬ gá»i service má»™t cÃ¡ch bÃ¬nh thÆ°á»ng.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>